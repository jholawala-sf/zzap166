{"version":3,"file":"salesforce-retail-react-app-app-pages-registration.js","mappings":"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","sources":["webpack://composable-storefront-toolkit/./app/pages/registration/index.jsx"],"sourcesContent":["/*\n * Copyright (c) 2021, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\nimport React, {useEffect} from 'react'\nimport PropTypes from 'prop-types'\nimport {useIntl} from 'react-intl'\nimport {Box, Container} from '@salesforce/retail-react-app/app/components/shared/ui'\nimport {AuthHelpers, useAuthHelper, useCustomerType} from '@salesforce/commerce-sdk-react'\nimport {useForm} from 'react-hook-form'\nimport {useLocation} from 'react-router-dom'\nimport Seo from '@salesforce/retail-react-app/app/components/seo'\nimport RegisterForm from '@salesforce/retail-react-app/app/components/register'\nimport useNavigation from '@salesforce/retail-react-app/app/hooks/use-navigation'\nimport useEinstein from '@salesforce/retail-react-app/app/hooks/use-einstein'\nimport useDataCloud from '@salesforce/retail-react-app/app/hooks/use-datacloud'\nimport {API_ERROR_MESSAGE} from '@salesforce/retail-react-app/app/constants'\n\nconst Registration = () => {\n    const {formatMessage} = useIntl()\n    const navigate = useNavigation()\n    const {isRegistered} = useCustomerType()\n    const form = useForm()\n    const einstein = useEinstein()\n    const dataCloud = useDataCloud()\n    const {pathname} = useLocation()\n    const register = useAuthHelper(AuthHelpers.Register)\n\n    const submitForm = async (data) => {\n        const body = {\n            customer: {\n                firstName: data.firstName,\n                lastName: data.lastName,\n                email: data.email,\n                login: data.email\n            },\n            password: data.password\n        }\n\n        try {\n            await register.mutateAsync(body, {})\n        } catch (e) {\n            form.setError('global', {type: 'manual', message: formatMessage(API_ERROR_MESSAGE)})\n        }\n    }\n\n    useEffect(() => {\n        if (isRegistered) {\n            navigate('/account')\n        }\n    }, [isRegistered])\n\n    /**************** Einstein ****************/\n    useEffect(() => {\n        einstein.sendViewPage(pathname)\n        dataCloud.sendViewPage(pathname)\n    }, [])\n\n    return (\n        <Box data-testid=\"registration-page\" bg=\"gray.50\" py={[8, 16]}>\n            <Seo title=\"Registration\" description=\"Customer sign up\" />\n            <Container\n                paddingTop={16}\n                width={['100%', '407px']}\n                bg=\"white\"\n                paddingBottom={14}\n                marginTop={8}\n                marginBottom={8}\n                borderRadius=\"base\"\n            >\n                <RegisterForm\n                    submitForm={submitForm}\n                    form={form}\n                    clickSignIn={() => navigate('/login')}\n                />\n            </Container>\n        </Box>\n    )\n}\n\nRegistration.getTemplateName = () => 'registration'\n\nRegistration.propTypes = {\n    match: PropTypes.object\n}\n\nexport default Registration\n"],"names":["React","useEffect","PropTypes","useIntl","Box","Container","AuthHelpers","useAuthHelper","useCustomerType","useForm","useLocation","Seo","RegisterForm","useNavigation","useEinstein","useDataCloud","API_ERROR_MESSAGE","Registration","formatMessage","navigate","isRegistered","form","einstein","dataCloud","pathname","register","Register","submitForm","_ref","_asyncToGenerator","data","body","customer","firstName","lastName","email","login","password","mutateAsync","e","setError","type","message","_x","apply","arguments","sendViewPage","createElement","bg","py","title","description","paddingTop","width","paddingBottom","marginTop","marginBottom","borderRadius","clickSignIn","getTemplateName","propTypes","match","object"],"sourceRoot":""}